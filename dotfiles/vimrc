" ### Basics ###
set nocompatible
set directory=$HOME/.vim/swp
set nobackup nowritebackup noswapfile autoread
set mouse=a
let mapleader=","
set clipboard=unnamed,unnamedplus "use the system clipboard
set backspace=2
set undodir=~/.vim/undo
set undofile
set undolevels=1000
set undoreload=10000

" ### Detect OSX ###
let s:on_osx=0
if has("unix")
    let s:uname=system("uname")
    if s:uname=="Darwin\n"
        let s:on_osx=1
    endif
endif

" ### Vundle ###
filetype off
set rtp+=~/.vim/bundle/Vundle.vim
call vundle#begin()
Plugin 'gmarik/Vundle.vim'
Plugin 'kien/ctrlp.vim'
Plugin 'pangloss/vim-javascript'
Plugin 'mxw/vim-jsx'
Plugin 'tpope/vim-surround'
Plugin 'godlygeek/tabular'
Plugin 'vim-airline/vim-airline'
Plugin 'vim-airline/vim-airline-themes'
Plugin 'airblade/vim-gitgutter'
Plugin 'tpope/vim-fugitive'
Plugin 'christoomey/vim-tmux-navigator'
Plugin 'plasticboy/vim-markdown'
Plugin 'rakr/vim-one'
call vundle#end()
filetype plugin indent on

" ### Colours ###
syntax on
silent! colorscheme one
set background=light
let g:one_allow_italics = 1
set t_Co=256

" ### Lines ###
set number
set wrap

" ### Tabs -> Spaces ###
set tabstop=4
set shiftwidth=4
set expandtab
set autoindent
autocmd FileType yaml setlocal shiftwidth=2 tabstop=2

" ### Search ###
set incsearch
set hlsearch
set ignorecase
set smartcase

" ### netrw ###
let g:netrw_liststyle=3

" ### Javascript ###
" Turn JSX highlighting on for all files
let g:jsx_ext_required = 0

" ### Leader Aliases ###
nnoremap <Leader>p :CtrlP<CR>
nnoremap <Leader>f :Explore!<CR>

" ### Status Line / Airline ###
set laststatus=2
let g:airline_powerline_fonts = 1

" ### Setup for seemless tmux integration
let g:tmux_navigator_no_mappings = 1
nnoremap <silent> <C-w>h :TmuxNavigateLeft<cr>
nnoremap <silent> <C-w>j :TmuxNavigateDown<cr>
nnoremap <silent> <C-w>k :TmuxNavigateUp<cr>
nnoremap <silent> <C-w>l :TmuxNavigateRight<cr>

" ### ctrlp ###
let g:ctrlp_custom_ignore = 'node_modules\|DS_Store\|git'

" ### Markdown ###
let g:vim_markdown_folding_disabled = 1

" ### Include .vimrc.local file for local overrides
if filereadable(glob("~/.vimrc.local")) 
    source ~/.vimrc.local
endif
