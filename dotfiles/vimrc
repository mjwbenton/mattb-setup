" ### Basics ###
set nocompatible
set directory=$HOME/.vim/swp
set nobackup nowritebackup noswapfile autoread
set mouse=a
let mapleader=","
let maplocalleader=","
set clipboard=unnamed,unnamedplus "use the system clipboard
set backspace=2
set undodir=~/.vim/undo
set undofile
set undolevels=1000
set undoreload=10000

" ### Detect OSX ###
let s:on_osx=0
if has("unix")
    let s:uname=system("uname")
    if s:uname=="Darwin\n"
        let s:on_osx=1
    endif
endif

" ### Vundle ###
filetype off
set rtp+=~/.vim/bundle/Vundle.vim
set rtp+=/usr/local/opt/fzf
call vundle#begin()
Plugin 'gmarik/Vundle.vim'
Plugin 'godlygeek/tabular'
Plugin 'vim-airline/vim-airline'
Plugin 'vim-airline/vim-airline-themes'
Plugin 'airblade/vim-gitgutter'
Plugin 'tpope/vim-fugitive'
Plugin 'christoomey/vim-tmux-navigator'
Plugin 'plasticboy/vim-markdown'
Plugin 'ayu-theme/ayu-vim'
Plugin 'alok/notational-fzf-vim'
Plugin 'shime/vim-livedown'
Plugin 'aserebryakov/vim-todo-lists'
call vundle#end()
filetype plugin indent on

" ### Colours ###
syntax on
let ayucolor="light"
silent! colorscheme ayu
set background=light
let g:one_allow_italics = 1
set t_Co=256

" ### Lines ###
set number
set wrap

" ### Tabs -> Spaces ###
set tabstop=4
set shiftwidth=4
set expandtab
set autoindent
autocmd FileType yaml setlocal shiftwidth=2 tabstop=2

" ### Search ###
set incsearch
set hlsearch
set ignorecase
set smartcase

" ### netrw ###
let g:netrw_liststyle=3

" ### Leader Aliases ###
nnoremap <Leader>p :CtrlP<CR>
nnoremap <Leader>f :Explore!<CR>
nnoremap <Leader>l :LivedownToggle<CR>

" ### Status Line / Airline ###
set laststatus=2
let g:airline_powerline_fonts = 1
let g:airline_theme='papercolor'

" ### Setup for seemless tmux integration
let g:tmux_navigator_no_mappings = 1
nnoremap <silent> <C-w>h :TmuxNavigateLeft<cr>
nnoremap <silent> <C-w>j :TmuxNavigateDown<cr>
nnoremap <silent> <C-w>k :TmuxNavigateUp<cr>
nnoremap <silent> <C-w>l :TmuxNavigateRight<cr>

" ### Markdown ###
au BufRead,BufNewFile *.txt set filetype=markdown
let g:vim_markdown_folding_disabled = 1

" ### TODO ### 
let g:VimTodoListsDatesEnabled = 1
let g:VimTodoListsDatesFormat = "%Y-%m-%d"

" ### NV ####
let g:nv_search_paths=['~/notes']
let g:nv_use_short_pathnames = 1
let g:nv_default_extension = '.txt'
nnoremap <Leader>n :NV<CR>
let g:nv_keymap = {
    \ 'ctrl-s': 'split ',
    \ 'ctrl-v': 'vertical split ',
    \ }
let g:nv_create_note_key = 'ctrl-n'
let g:nv_create_note_window = 'vertical split'

" ### Include .vimrc.local file for local overrides
if filereadable(glob("~/.vimrc.local")) 
    source ~/.vimrc.local
endif
